# ============================================
# APPLICATION CONFIGURATION
# ============================================
spring.application.name=subscription-tracker
server.port=${PORT:8084}

# ============================================
# POSTGRESQL DATABASE CONFIGURATION
# PRODUCTION: Set these environment variables:
#   DB_URL, DB_USERNAME, DB_PASSWORD
# LOCAL: Uses defaults if env vars not set
# ============================================
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/subscription_tracker_db}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:Adi@1608}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection pool settings for production
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:10}
spring.datasource.hikari.minimum-idle=${DB_POOL_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ============================================
# JPA/HIBERNATE CONFIGURATION
# ============================================
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# ============================================
# JWT CONFIGURATION
# PRODUCTION: Set JWT_SECRET to a strong 256-bit key
# Generate one with: openssl rand -base64 32
# LOCAL: Uses a dev-only secret (NOT FOR PRODUCTION!)
# ============================================
jwt.secret=${JWT_SECRET:0Ung7+X5IbZiZJj/l5ij8YS/sz4nRufrkUfQd5GfrWc=}
jwt.expiration=${JWT_EXPIRATION:86400000}

# ============================================
# EMAIL CONFIGURATION (Gmail SMTP)
# PRODUCTION: Set MAIL_USERNAME and MAIL_PASSWORD
# Use Gmail App Password, not your actual password
# LOCAL: Uses placeholder values (emails won't work)
# ============================================
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:hactivators007@gmail.com}
spring.mail.password=${MAIL_PASSWORD:wjiqxctvykkwnrgq}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Email sender details
app.email.from=${MAIL_FROM:noreply@subtracker.io}
app.email.from-name=${MAIL_FROM_NAME:SubTracker}

# ============================================
# CORS CONFIGURATION
# PRODUCTION: Set CORS_ORIGINS to your frontend domain(s)
# ============================================
cors.allowed.origins=${CORS_ORIGINS:http://localhost:3000,http://localhost:5173}

# ============================================
# STRIPE CONFIGURATION
# PRODUCTION: Set STRIPE_SECRET_KEY to your live key
# LOCAL: Uses test key placeholder (Stripe won't work)
# ============================================
stripe.secret.key=${STRIPE_SECRET_KEY:sk_test_51RoQN5Jca3aSItTYJGdlTSHDIUJRrHZfmXN0A8PeTb8CIu6oRIV1tvETKL3eH8SYx35TYbrcheJr3hHKqYWefZkk00XqndnYLu}

# Frontend URL for redirects
app.frontend.url=${FRONTEND_URL:http://localhost:5173}

# ============================================
# SCRAPER CONFIGURATION
# ============================================
# Currency conversion rate (update periodically or use API)
scraper.usd.to.inr=${USD_TO_INR_RATE:83.0}

# Connection timeouts (milliseconds)
scraper.connection.timeout=${SCRAPER_TIMEOUT:15000}

# Retry configuration
scraper.retry.max-attempts=${SCRAPER_RETRY_MAX:3}
scraper.retry.delay-ms=${SCRAPER_RETRY_DELAY:2000}

# User agent for scraping
scraper.user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36

# ============================================
# SCHEDULING CONFIGURATION
# ============================================
# Timezone for scheduled jobs (IST = Asia/Kolkata)
spring.task.scheduling.pool.size=2
app.scheduling.timezone=${SCHEDULER_TIMEZONE:Asia/Kolkata}

# ============================================
# ACTUATOR / HEALTH CHECKS
# ============================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.health.db.enabled=true

# ============================================
# LOGGING CONFIGURATION
# ============================================
logging.level.root=INFO
logging.level.com.subscriptiontracker=INFO
logging.level.com.subscriptiontracker.service.PriceScraperService=${SCRAPER_LOG_LEVEL:INFO}
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n